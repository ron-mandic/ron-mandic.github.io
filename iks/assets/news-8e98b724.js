var g=Object.defineProperty;var m=(t,e,o)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var a=(t,e,o)=>(m(t,typeof e!="symbol"?e+"":e,o),o);import"./modulepreload-polyfill-3cfb730f.js";import{b as E,w as _,d as p,e as A,f as G,h as c,i as C,n as y,s as R,Z as S,t as T,u as b,E as s,v as I,x as r}from"./functions-2d18ef68.js";import{g as f}from"./index-7127c1b0.js";import{S as D}from"./ScrollTrigger-81c3bda5.js";import"./three.module-fe8d8457.js";f.registerPlugin(D);class L{constructor(e,o){a(this,"world");a(this,"WebGLRenderer");a(this,"Scene");a(this,"Camera");a(this,"data");a(this,"selectedCountry");a(this,"uiRevealed");a(this,"zoomedOut");this.world=E(o)(document.querySelector(e)).globeImageUrl(_).bumpImageUrl(p).backgroundImageUrl(A),this.WebGLRenderer=this.world.renderer(),this.Scene=this.world.scene(),this.Camera=this.world.camera(),this.data=null,this.selectedCountry=null,this.uiRevealed=!1,this.zoomedOut=!1,this.world.onGlobeReady(async()=>{fetch(G).then(n=>n.json()).then(n=>this.render(n)).catch(n=>console.error("onGlobeReady: ",n)),this.world.enablePointerInteraction(!1)})}render(e){this.data=e,this.preconfigure(),this.world.polygonsData(c(this.data,"default:news")),this.initEvents(),window.addEventListener("resize",()=>C(this.world)),this.onZoom(),console.log(this)}initEvents(){this.world.enablePointerInteraction(!0)}preconfigure(){y(this.world),R(this.world),this.world.pointOfView({lat:0,lng:20,altitude:8},5500)}onZoom(){this.world.onZoom(e=>{var o;e.altitude>S?(this.zoomedOut||((o=this.world)==null||o.onPolygonClick(()=>!1),this.world.polygonsData(c(this.data,"default:news")),this.resetRoutes()),T(this)):b(this)})}resetRoutes(){this.world.ringsData([])}}let d=!1,h=!1,i=s.SUDAN;const w=f.timeline(),l=new L("#app",I),O=document.querySelector("#ui"),M=O.querySelector(".handle-area"),u=O.querySelector(".blog-header-container");function N(t){if(t<=.2&&i!==s.SUDAN){i=s.SUDAN;const{lat:e,lng:o}=r[i];l.world.pointOfView({lat:e,lng:o,altitude:.55},2500)}else if(t>.2&&t<=.4&&i!==s.GREECE)i=s.GREECE,l.world.pointOfView(r[i],2500);else if(t>.4&&t<=.6&&i!==s.MYANMAR){i=s.MYANMAR;const{lat:e,lng:o}=r[i];l.world.pointOfView({lat:e,lng:o,altitude:.425},2500)}else if(t>.6&&t<=.8&&i!==s.DR_CONGO){i=s.DR_CONGO;const{lat:e,lng:o}=r[i];l.world.pointOfView({lat:e,lng:o,altitude:.55},2500)}else t>.8&&t<=1&&i!==s.ITALY&&(i=s.ITALY,l.world.pointOfView(r[i],2500))}M.addEventListener("click",()=>{u.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{l.world.pointOfView({lat:0,lng:20,altitude:8},2500)},2e3),h||setTimeout(()=>{let{lat:t,lng:e}=r[i];l.world.pointOfView({lat:t,lng:e,altitude:.55},2500)},2e3),d?w.to("#ui",{translateX:"-96.375%",duration:1.5,ease:"power2.inOut"}).to("#app",{translateX:"0",duration:1.5,delay:-1.25,ease:"circ.out"}):(w.to("#app",{translateX:"31%",duration:1.5,ease:"power2.inOut"}).to("#ui",{translateX:"0",duration:1.5,delay:-1.5,ease:"circ.out"}),h||(u.classList.add("introduce"),h=!0)),d=!d,l.world.pointOfView({lat:0,lng:20,altitude:8},2500),document.body.classList.toggle("side")});u.addEventListener("scroll",function(){N((this.scrollTop+this.clientHeight)/this.scrollHeight)});
